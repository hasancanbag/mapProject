{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hasan\\\\webproj\\\\openlayers-project\\\\src\\\\components\\\\Map.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { fetchWktData } from '../store/wktSlice';\nimport Map from 'ol/Map';\nimport View from 'ol/View';\nimport TileLayer from 'ol/layer/Tile';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\nimport OSM from 'ol/source/OSM';\nimport { WKT } from 'ol/format';\nimport { fromLonLat } from 'ol/proj';\nimport Draw from 'ol/interaction/Draw'; // Çizim etkileşimi için gerekli\nimport { setDrawActive } from '../store/drawSlice'; // Redux'tan drawActive durumunu güncellemek için\nimport { AddFeature } from './AddFeature';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapComponent = () => {\n  _s();\n  const dispatch = useDispatch();\n  const wktData = useSelector(state => state.wkt.wktData);\n  const status = useSelector(state => state.wkt.status);\n  const drawType = useSelector(state => state.draw.drawType); // Çizim türü\n  const drawActive = useSelector(state => state.draw.drawActive); // Çizim aktif mi?\n\n  const mapRef = useRef();\n  const vectorSource = useRef(new VectorSource());\n  const drawInteraction = useRef(null); // Çizim etkileşimini saklamak için referans\n\n  // Harita yükleme\n  useEffect(() => {\n    if (!mapRef.current) {\n      mapRef.current = new Map({\n        target: 'map',\n        layers: [new TileLayer({\n          source: new OSM()\n        }), new VectorLayer({\n          source: vectorSource.current\n        })],\n        view: new View({\n          center: fromLonLat([29.035767, 41.065685]),\n          zoom: 6\n        })\n      });\n    }\n  }, []);\n\n  // WKT verisini işleme\n  useEffect(() => {\n    if (status === 'succeeded') {\n      const format = new WKT();\n      wktData.forEach(({\n        log,\n        id,\n        name\n      }) => {\n        const feature = format.readFeature(log, {\n          dataProjection: 'EPSG:3857',\n          featureProjection: 'EPSG:3857'\n        });\n        feature.setProperties({\n          id,\n          name\n        });\n        vectorSource.current.addFeature(feature);\n      });\n    }\n  }, [wktData, status]);\n\n  // Çizim türü değiştiğinde etkileşimi güncelleme\n  useEffect(() => {\n    if (drawInteraction.current) {\n      mapRef.current.removeInteraction(drawInteraction.current); // Eski etkileşimi kaldır\n    }\n    if (drawActive && drawType) {\n      drawInteraction.current = new Draw({\n        source: vectorSource.current,\n        type: drawType // Point, LineString veya Polygon\n      });\n      mapRef.current.addInteraction(drawInteraction.current);\n\n      // Çizim bittiğinde Redux durumunu kapat\n      drawInteraction.current.on('drawend', () => {\n        dispatch(setDrawActive(false));\n      });\n    }\n  }, [drawType, drawActive, dispatch]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"map\",\n    className: \"w-full h-screen\",\n    children: /*#__PURE__*/_jsxDEV(AddFeature, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 52\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 10\n  }, this); // Harita div'i\n};\n_s(MapComponent, \"XLMsRgduNY4mnK9Epzjq2Kbxknc=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector];\n});\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useEffect","useRef","useSelector","useDispatch","fetchWktData","Map","View","TileLayer","VectorLayer","VectorSource","OSM","WKT","fromLonLat","Draw","setDrawActive","AddFeature","jsxDEV","_jsxDEV","MapComponent","_s","dispatch","wktData","state","wkt","status","drawType","draw","drawActive","mapRef","vectorSource","drawInteraction","current","target","layers","source","view","center","zoom","format","forEach","log","id","name","feature","readFeature","dataProjection","featureProjection","setProperties","addFeature","removeInteraction","type","addInteraction","on","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/hasan/webproj/openlayers-project/src/components/Map.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { fetchWktData } from '../store/wktSlice';\r\nimport Map from 'ol/Map';\r\nimport View from 'ol/View';\r\nimport TileLayer from 'ol/layer/Tile';\r\nimport VectorLayer from 'ol/layer/Vector';\r\nimport VectorSource from 'ol/source/Vector';\r\nimport OSM from 'ol/source/OSM';\r\nimport { WKT } from 'ol/format';\r\nimport { fromLonLat } from 'ol/proj';\r\nimport Draw from 'ol/interaction/Draw'; // Çizim etkileşimi için gerekli\r\nimport { setDrawActive } from '../store/drawSlice'; // Redux'tan drawActive durumunu güncellemek için\r\nimport { AddFeature } from './AddFeature';\r\n\r\nconst MapComponent = () => {\r\n  const dispatch = useDispatch();\r\n  const wktData = useSelector((state) => state.wkt.wktData);\r\n  const status = useSelector((state) => state.wkt.status);\r\n  const drawType = useSelector((state) => state.draw.drawType); // Çizim türü\r\n  const drawActive = useSelector((state) => state.draw.drawActive); // Çizim aktif mi?\r\n\r\n  const mapRef = useRef(); \r\n  const vectorSource = useRef(new VectorSource());\r\n  const drawInteraction = useRef(null); // Çizim etkileşimini saklamak için referans\r\n\r\n  // Harita yükleme\r\n  useEffect(() => {\r\n    if (!mapRef.current) {\r\n      mapRef.current = new Map({\r\n        target: 'map',\r\n        layers: [\r\n          new TileLayer({ source: new OSM() }), \r\n          new VectorLayer({ source: vectorSource.current }), \r\n        ],\r\n        view: new View({ center: fromLonLat([29.035767, 41.065685]), zoom: 6 }),\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  // WKT verisini işleme\r\n  useEffect(() => {\r\n    if (status === 'succeeded') {\r\n      const format = new WKT();\r\n      wktData.forEach(({ log, id, name }) => {\r\n        const feature = format.readFeature(log, {\r\n          dataProjection: 'EPSG:3857',\r\n          featureProjection: 'EPSG:3857',\r\n        });\r\n\r\n        feature.setProperties({ id, name });\r\n        vectorSource.current.addFeature(feature);\r\n      });\r\n    }\r\n  }, [wktData, status]);\r\n\r\n  // Çizim türü değiştiğinde etkileşimi güncelleme\r\n  useEffect(() => {\r\n    if (drawInteraction.current) {\r\n      mapRef.current.removeInteraction(drawInteraction.current); // Eski etkileşimi kaldır\r\n    }\r\n\r\n    if (drawActive && drawType) {\r\n      drawInteraction.current = new Draw({\r\n        source: vectorSource.current,\r\n        type: drawType, // Point, LineString veya Polygon\r\n      });\r\n\r\n      mapRef.current.addInteraction(drawInteraction.current);\r\n\r\n      // Çizim bittiğinde Redux durumunu kapat\r\n      drawInteraction.current.on('drawend', () => {\r\n        dispatch(setDrawActive(false));\r\n      });\r\n    }\r\n  }, [drawType, drawActive, dispatch]);\r\n\r\n  return <div id=\"map\" className=\"w-full h-screen\"><AddFeature /></div>; // Harita div'i\r\n};\r\n\r\nexport default MapComponent;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAChD,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,YAAY,QAAQ,mBAAmB;AAChD,OAAOC,GAAG,MAAM,QAAQ;AACxB,OAAOC,IAAI,MAAM,SAAS;AAC1B,OAAOC,SAAS,MAAM,eAAe;AACrC,OAAOC,WAAW,MAAM,iBAAiB;AACzC,OAAOC,YAAY,MAAM,kBAAkB;AAC3C,OAAOC,GAAG,MAAM,eAAe;AAC/B,SAASC,GAAG,QAAQ,WAAW;AAC/B,SAASC,UAAU,QAAQ,SAAS;AACpC,OAAOC,IAAI,MAAM,qBAAqB,CAAC,CAAC;AACxC,SAASC,aAAa,QAAQ,oBAAoB,CAAC,CAAC;AACpD,SAASC,UAAU,QAAQ,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1C,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACzB,MAAMC,QAAQ,GAAGjB,WAAW,CAAC,CAAC;EAC9B,MAAMkB,OAAO,GAAGnB,WAAW,CAAEoB,KAAK,IAAKA,KAAK,CAACC,GAAG,CAACF,OAAO,CAAC;EACzD,MAAMG,MAAM,GAAGtB,WAAW,CAAEoB,KAAK,IAAKA,KAAK,CAACC,GAAG,CAACC,MAAM,CAAC;EACvD,MAAMC,QAAQ,GAAGvB,WAAW,CAAEoB,KAAK,IAAKA,KAAK,CAACI,IAAI,CAACD,QAAQ,CAAC,CAAC,CAAC;EAC9D,MAAME,UAAU,GAAGzB,WAAW,CAAEoB,KAAK,IAAKA,KAAK,CAACI,IAAI,CAACC,UAAU,CAAC,CAAC,CAAC;;EAElE,MAAMC,MAAM,GAAG3B,MAAM,CAAC,CAAC;EACvB,MAAM4B,YAAY,GAAG5B,MAAM,CAAC,IAAIQ,YAAY,CAAC,CAAC,CAAC;EAC/C,MAAMqB,eAAe,GAAG7B,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;;EAEtC;EACAD,SAAS,CAAC,MAAM;IACd,IAAI,CAAC4B,MAAM,CAACG,OAAO,EAAE;MACnBH,MAAM,CAACG,OAAO,GAAG,IAAI1B,GAAG,CAAC;QACvB2B,MAAM,EAAE,KAAK;QACbC,MAAM,EAAE,CACN,IAAI1B,SAAS,CAAC;UAAE2B,MAAM,EAAE,IAAIxB,GAAG,CAAC;QAAE,CAAC,CAAC,EACpC,IAAIF,WAAW,CAAC;UAAE0B,MAAM,EAAEL,YAAY,CAACE;QAAQ,CAAC,CAAC,CAClD;QACDI,IAAI,EAAE,IAAI7B,IAAI,CAAC;UAAE8B,MAAM,EAAExB,UAAU,CAAC,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;UAAEyB,IAAI,EAAE;QAAE,CAAC;MACxE,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,EAAE,CAAC;;EAEN;EACArC,SAAS,CAAC,MAAM;IACd,IAAIwB,MAAM,KAAK,WAAW,EAAE;MAC1B,MAAMc,MAAM,GAAG,IAAI3B,GAAG,CAAC,CAAC;MACxBU,OAAO,CAACkB,OAAO,CAAC,CAAC;QAAEC,GAAG;QAAEC,EAAE;QAAEC;MAAK,CAAC,KAAK;QACrC,MAAMC,OAAO,GAAGL,MAAM,CAACM,WAAW,CAACJ,GAAG,EAAE;UACtCK,cAAc,EAAE,WAAW;UAC3BC,iBAAiB,EAAE;QACrB,CAAC,CAAC;QAEFH,OAAO,CAACI,aAAa,CAAC;UAAEN,EAAE;UAAEC;QAAK,CAAC,CAAC;QACnCb,YAAY,CAACE,OAAO,CAACiB,UAAU,CAACL,OAAO,CAAC;MAC1C,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAACtB,OAAO,EAAEG,MAAM,CAAC,CAAC;;EAErB;EACAxB,SAAS,CAAC,MAAM;IACd,IAAI8B,eAAe,CAACC,OAAO,EAAE;MAC3BH,MAAM,CAACG,OAAO,CAACkB,iBAAiB,CAACnB,eAAe,CAACC,OAAO,CAAC,CAAC,CAAC;IAC7D;IAEA,IAAIJ,UAAU,IAAIF,QAAQ,EAAE;MAC1BK,eAAe,CAACC,OAAO,GAAG,IAAIlB,IAAI,CAAC;QACjCqB,MAAM,EAAEL,YAAY,CAACE,OAAO;QAC5BmB,IAAI,EAAEzB,QAAQ,CAAE;MAClB,CAAC,CAAC;MAEFG,MAAM,CAACG,OAAO,CAACoB,cAAc,CAACrB,eAAe,CAACC,OAAO,CAAC;;MAEtD;MACAD,eAAe,CAACC,OAAO,CAACqB,EAAE,CAAC,SAAS,EAAE,MAAM;QAC1ChC,QAAQ,CAACN,aAAa,CAAC,KAAK,CAAC,CAAC;MAChC,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAACW,QAAQ,EAAEE,UAAU,EAAEP,QAAQ,CAAC,CAAC;EAEpC,oBAAOH,OAAA;IAAKwB,EAAE,EAAC,KAAK;IAACY,SAAS,EAAC,iBAAiB;IAAAC,QAAA,eAACrC,OAAA,CAACF,UAAU;MAAAwC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC,CAAC,CAAC;AACzE,CAAC;AAACvC,EAAA,CA/DID,YAAY;EAAA,QACCf,WAAW,EACZD,WAAW,EACZA,WAAW,EACTA,WAAW,EACTA,WAAW;AAAA;AAAAyD,EAAA,GAL1BzC,YAAY;AAiElB,eAAeA,YAAY;AAAC,IAAAyC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}