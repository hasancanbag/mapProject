{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hasan\\\\webproj\\\\openlayers-project\\\\src\\\\components\\\\Map.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { fetchWktData } from '../store/wktSlice';\nimport Map from 'ol/Map';\nimport View from 'ol/View';\nimport TileLayer from 'ol/layer/Tile';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\nimport OSM from 'ol/source/OSM';\nimport { WKT } from 'ol/format';\nimport { fromLonLat } from 'ol/proj';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapComponent = () => {\n  _s();\n  const dispatch = useDispatch();\n  const wktData = useSelector(state => state.wkt.wktData);\n  const status = useSelector(state => state.wkt.status);\n  const mapRef = useRef(); // Harita referansı\n  const vectorSource = useRef(new VectorSource()); // VectorSource referansı\n\n  useEffect(() => {\n    // Redux üzerinden WKT verisini çek\n    dispatch(fetchWktData());\n  }, [dispatch]);\n  useEffect(() => {\n    // Harita yalnızca bir kez başlatılır\n    if (!mapRef.current) {\n      mapRef.current = new Map({\n        target: 'map',\n        // Haritayı bağlayacağımız div\n        layers: [new TileLayer({\n          source: new OSM()\n        }),\n        // OpenStreetMap taban katmanı\n        new VectorLayer({\n          source: vectorSource.current\n        }) // Vector katmanı\n        ],\n        view: new View({\n          center: fromLonLat([0, 0]),\n          zoom: 2\n        }) // Harita başlangıç görünümü\n      });\n    }\n  }, []);\n  useEffect(() => {\n    if (status === 'succeeded') {\n      const format = new WKT();\n      wktData.forEach(({\n        log,\n        id,\n        name\n      }) => {\n        const feature = format.readFeature(log, {\n          dataProjection: 'EPSG:4326',\n          // WKT'nin orijinal projeksiyonu\n          featureProjection: 'EPSG:3857' // Harita projeksiyonu\n        });\n        feature.setProperties({\n          id,\n          name\n        }); // Ek özellikler (id, name) atanıyor\n        vectorSource.current.addFeature(feature); // Feature vector kaynağına ekleniyor\n      });\n\n      // Extent'i kontrol ederek yalnızca geçerli olduğunda fit uygula\n    }\n  }, [wktData, status]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"map\",\n    className: \"w-full h-screen\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 10\n  }, this); // Harita div'i\n};\n_s(MapComponent, \"aMDqpTez+X1rVl8XDKPvRautw40=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useEffect","useRef","useSelector","useDispatch","fetchWktData","Map","View","TileLayer","VectorLayer","VectorSource","OSM","WKT","fromLonLat","jsxDEV","_jsxDEV","MapComponent","_s","dispatch","wktData","state","wkt","status","mapRef","vectorSource","current","target","layers","source","view","center","zoom","format","forEach","log","id","name","feature","readFeature","dataProjection","featureProjection","setProperties","addFeature","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/hasan/webproj/openlayers-project/src/components/Map.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { fetchWktData } from '../store/wktSlice';\r\nimport Map from 'ol/Map';\r\nimport View from 'ol/View';\r\nimport TileLayer from 'ol/layer/Tile';\r\nimport VectorLayer from 'ol/layer/Vector';\r\nimport VectorSource from 'ol/source/Vector';\r\nimport OSM from 'ol/source/OSM';\r\nimport { WKT } from 'ol/format';\r\nimport { fromLonLat } from 'ol/proj';\r\n\r\nconst MapComponent = () => {\r\n  const dispatch = useDispatch();\r\n  const wktData = useSelector((state) => state.wkt.wktData);\r\n  const status = useSelector((state) => state.wkt.status);\r\n\r\n  const mapRef = useRef(); // Harita referansı\r\n  const vectorSource = useRef(new VectorSource()); // VectorSource referansı\r\n\r\n  useEffect(() => {\r\n    // Redux üzerinden WKT verisini çek\r\n    dispatch(fetchWktData());\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    // Harita yalnızca bir kez başlatılır\r\n    if (!mapRef.current) {\r\n      mapRef.current = new Map({\r\n        target: 'map', // Haritayı bağlayacağımız div\r\n        layers: [\r\n          new TileLayer({ source: new OSM() }), // OpenStreetMap taban katmanı\r\n          new VectorLayer({ source: vectorSource.current }), // Vector katmanı\r\n        ],\r\n        view: new View({ center: fromLonLat([0, 0]), zoom: 2 }), // Harita başlangıç görünümü\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (status === 'succeeded') {\r\n      const format = new WKT();\r\n      wktData.forEach(({ log, id, name }) => {\r\n        const feature = format.readFeature(log, {\r\n          dataProjection: 'EPSG:4326', // WKT'nin orijinal projeksiyonu\r\n          featureProjection: 'EPSG:3857', // Harita projeksiyonu\r\n        });\r\n  \r\n        feature.setProperties({ id, name }); // Ek özellikler (id, name) atanıyor\r\n        vectorSource.current.addFeature(feature); // Feature vector kaynağına ekleniyor\r\n      });\r\n  \r\n      // Extent'i kontrol ederek yalnızca geçerli olduğunda fit uygula\r\n    }\r\n  }, [wktData, status]);\r\n  \r\n\r\n  return <div id=\"map\" className=\"w-full h-screen\"></div>; // Harita div'i\r\n};\r\n\r\nexport default MapComponent;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}