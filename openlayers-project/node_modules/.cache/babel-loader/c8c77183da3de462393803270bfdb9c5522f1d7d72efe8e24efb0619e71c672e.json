{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hasan\\\\webproj\\\\openlayers-project\\\\src\\\\components\\\\Map.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { fetchWktData, addFeature } from '../store/wktSlice';\nimport { Map } from 'ol';\nimport { getCenter } from 'ol/extent';\nimport View from 'ol/View';\nimport { Tile as TileLayer } from 'ol/layer';\nimport { Vector as VectorLayer } from 'ol/layer';\nimport { Vector as VectorSource } from 'ol/source';\nimport OSM from 'ol/source/OSM';\nimport { WKT } from 'ol/format';\nimport { fromLonLat } from 'ol/proj';\nimport { Draw } from 'ol/interaction';\nimport { setDrawActive } from '../store/drawSlice';\nimport AddFeature from './AddFeature';\nimport { setZoom, setDeletedFeatureId } from '../store/featureSlice';\nimport { Select } from \"ol/interaction\";\nimport { click } from \"ol/events/condition\";\nimport { defaults as defaultControls } from 'ol/control';\nimport FeaturePopup from './ShowFeature';\nimport { setSelectActive } from '../store/selectSlice';\nimport Modify from \"ol/interaction/Modify\";\nimport Translate from \"ol/interaction/Translate\";\nimport Collection from \"ol/Collection\";\nimport StopEditingButton from './StopEditingButton';\nimport FeatureModal from './UpdateFeature';\nimport { setShowUpdateFeature, setUpdateCanceled } from '../store/updateSlice';\nimport { setIsEditingDone, setNewFeature } from '../store/newFeatureSlice';\nimport { fetchUsers, setUsers } from '../store/userSlice';\nimport { toLonLat } from \"ol/proj\";\nimport { getWeatherByCoordinates } from \"../services/weatherService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapComponent = () => {\n  _s();\n  const dispatch = useDispatch();\n  const wktData = useSelector(state => state.wkt.wktData);\n  const userData = useSelector(state => state.user.users);\n  const status = useSelector(state => state.wkt.status);\n  const drawType = useSelector(state => state.draw.drawType);\n  const drawActive = useSelector(state => state.draw.drawActive);\n  const zoomMap = useSelector(state => state.feature.zoom);\n  const featureId = useSelector(state => state.feature.id);\n  const featureLog = useSelector(state => state.feature.log);\n  const featureName = useSelector(state => state.feature.name);\n  const deletedFeatureId = useSelector(state => state.feature.deletedFeatureId);\n  const selectAvailable = useSelector(state => state.select.selectActive);\n  const featureToModify = useSelector(state => state.update.featureToModify);\n  const showUpdateModal = useSelector(state => state.update.showUpdateModal);\n  const showUpdateFeature = useSelector(state => state.update.showUpdateFeature);\n  const isEditingDone = useSelector(state => state.newFeature.isEditingDone);\n  const newFeatureId = useSelector(state => state.newFeature.newFeatureId);\n  const updateCanceled = useSelector(state => state.update.updateCanceled);\n  const [weather, setWeather] = useState(null);\n  const mapRef = useRef();\n  const selectInteraction = useRef(null);\n  const vectorSource = useRef(new VectorSource());\n  const modifyInteraction = useRef(null);\n  const translateInteraction = useRef(null);\n  const drawInteraction = useRef(null);\n  const [selectedFeature, setSelectedFeature] = useState(null);\n  const [clickedFeature, setClickedFeature] = useState(null);\n  const [showClickedFeature, setShowClickedFeature] = useState(false);\n  useEffect(() => {\n    dispatch(fetchWktData());\n    dispatch(fetchUsers());\n  }, [dispatch]);\n  const [users, setUsers] = useState([]);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n          setError(\"Token bulunamadı. Lütfen giriş yapın.\");\n          return;\n        }\n        const response = await fetch(\"https://localhost:7014/api/Users\", {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"application/json\"\n          }\n        });\n        if (!response.ok) {\n          throw new Error(\"Kullanıcılar yüklenirken hata oluştu.\");\n        }\n        const data = await response.json();\n        if (!data.result) {\n          throw new Error(data.message || \"Kullanıcılar yüklenirken hata oluştu.\");\n        }\n        setUsers(data.value); // Kullanıcı listesini `setUsers` ile güncelle\n      } catch (err) {\n        setError(err.message);\n      }\n    };\n    fetchUsers();\n  }, []);\n  useEffect(() => {\n    if (!mapRef.current) {\n      mapRef.current = new Map({\n        target: 'map',\n        layers: [new TileLayer({\n          source: new OSM()\n        }), new VectorLayer({\n          source: vectorSource.current\n        })],\n        controls: [],\n        view: new View({\n          center: fromLonLat([29.035767, 41.065685]),\n          zoom: 6\n        })\n      });\n      selectInteraction.current = new Select({\n        condition: click\n      });\n      mapRef.current.addInteraction(selectInteraction.current);\n      selectInteraction.current.on('select', event => {\n        const selected = event.selected[0];\n        setClickedFeature(selected || null);\n        if (clickedFeature) {\n          const featureCenter = getCenter(selected.getGeometry().getExtent());\n          const [lon, lat] = toLonLat(featureCenter); // EPSG:4326 dönüşümü\n\n          // Hava durumu verisini çek\n          const weatherData = getWeatherByCoordinates(lat, lon);\n          setWeather(weatherData);\n          console.log(weather);\n        }\n        const featureCenter = getCenter(selected.getGeometry().getExtent());\n        setShowClickedFeature(true);\n      });\n    }\n  }, []);\n  useEffect(() => {\n    if (status === 'succeeded') {\n      const format = new WKT();\n      wktData.forEach(({\n        log,\n        id,\n        name\n      }) => {\n        const feature = format.readFeature(log, {\n          dataProjection: 'EPSG:3857',\n          featureProjection: 'EPSG:3857'\n        });\n        feature.setProperties({\n          id,\n          name\n        });\n        vectorSource.current.addFeature(feature);\n      });\n    }\n  }, [status]);\n  useEffect(() => {\n    if (isEditingDone) {\n      const featureToChange = vectorSource.current.getFeatures().find(feature => feature.get('id') === newFeatureId);\n      if (featureToChange) {\n        dispatch(setNewFeature(featureToChange));\n      }\n      dispatch(setShowUpdateFeature(true));\n      dispatch(setIsEditingDone(false));\n    }\n  }, [isEditingDone]);\n  useEffect(() => {\n    if (updateCanceled) {\n      vectorSource.current.removeFeature(clickedFeature);\n      const format = new WKT();\n      const targetFeatureData = wktData.find(feature => feature.id === newFeatureId);\n      const feature = format.readFeature(targetFeatureData.log, {\n        dataProjection: 'EPSG:3857',\n        featureProjection: 'EPSG:3857'\n      });\n      feature.setProperties({\n        id: targetFeatureData.id,\n        name: targetFeatureData.name\n      });\n      vectorSource.current.addFeature(feature);\n      dispatch(setUpdateCanceled(false));\n    }\n  }, [updateCanceled]);\n  useEffect(() => {\n    if (drawInteraction.current) {\n      mapRef.current.removeInteraction(drawInteraction.current);\n    }\n    if (drawActive && drawType) {\n      drawInteraction.current = new Draw({\n        source: vectorSource.current,\n        type: drawType\n      });\n      drawInteraction.current.on('drawend', event => {\n        const feature = event.feature;\n        setSelectedFeature(feature);\n        mapRef.current.removeInteraction(drawInteraction.current);\n        dispatch(setDrawActive(false));\n      });\n      mapRef.current.addInteraction(drawInteraction.current);\n    }\n  }, [drawType, drawActive, dispatch]);\n  useEffect(() => {\n    if (selectInteraction.current) {\n      selectInteraction.current.setActive(selectAvailable);\n    }\n  }, [selectAvailable]);\n  useEffect(() => {\n    if (modifyInteraction.current) {\n      mapRef.current.removeInteraction(modifyInteraction.current);\n      modifyInteraction.current = null;\n    }\n    if (translateInteraction.current) {\n      mapRef.current.removeInteraction(translateInteraction.current);\n      translateInteraction.current = null;\n    }\n    if (featureToModify) {\n      modifyInteraction.current = new Modify({\n        features: new Collection([featureToModify])\n      });\n      mapRef.current.addInteraction(modifyInteraction.current);\n      modifyInteraction.current.on(\"modifyend\", () => {\n        vectorSource.current.removeFeature(featureToModify);\n        vectorSource.current.addFeature(featureToModify);\n      });\n      translateInteraction.current = new Translate({\n        features: new Collection([featureToModify])\n      });\n      mapRef.current.addInteraction(translateInteraction.current);\n      translateInteraction.current.on(\"translateend\", () => {\n        vectorSource.current.removeFeature(featureToModify);\n        vectorSource.current.addFeature(featureToModify);\n      });\n    }\n  }, [featureToModify]);\n  useEffect(() => {\n    if (zoomMap !== \"\") {\n      const wktFormat = new WKT();\n      const feature = wktFormat.readFeature(zoomMap, {\n        dataProjection: 'EPSG:3857',\n        featureProjection: 'EPSG:3857'\n      });\n      const featureCenter = getCenter(feature.getGeometry().getExtent());\n      const view = mapRef.current.getView();\n      view.setCenter(featureCenter);\n      const targetZoom = 9;\n      view.setZoom(targetZoom);\n      dispatch(setZoom(\"\"));\n    }\n  }, [zoomMap, dispatch, featureLog]);\n  useEffect(() => {\n    if (deletedFeatureId) {\n      const features = vectorSource.current.getFeatures();\n      console.log(features);\n      const featureToRemove = vectorSource.current.getFeatures().find(feature => feature.get('id') === deletedFeatureId);\n      if (featureToRemove) {\n        vectorSource.current.removeFeature(featureToRemove);\n        dispatch(setDeletedFeatureId(null));\n      }\n    }\n  }, [deletedFeatureId]);\n\n  /*const handleSaveFeature = async (feature) => {\r\n    const wkt = new WKT().writeFeature(feature);\r\n    const name = feature.get('name');\r\n    const newFeature = feature;\r\n      try {\r\n      const response = await fetch('https://localhost:7014/api/Logs', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ name, log: wkt }),\r\n      });\r\n        if (response.ok) {\r\n        const savedFeature = await response.json();\r\n        newFeature.set('id', savedFeature.value.id);\r\n        vectorSource.current.addFeature(newFeature);\r\n        dispatch(setSelectActive(true));\r\n        alert('Feature saved successfully!');\r\n        dispatch(addFeature(savedFeature.value));\r\n      } else {\r\n        alert('Failed to save feature.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving feature:', error);\r\n    }\r\n  }; */\n\n  const handleSaveFeature = async feature => {\n    const wkt = new WKT().writeFeature(feature);\n    const name = feature.get('name');\n    const newFeature = feature;\n    try {\n      const token = localStorage.getItem('token');\n      const UserId = localStorage.getItem('userId');\n      if (!token) {\n        alert('Authentication token not found!');\n        return;\n      }\n      const response = await fetch('https://localhost:7014/api/Logs', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}` // Token'ı Authorization başlığına ekle\n        },\n        body: JSON.stringify({\n          name,\n          log: wkt,\n          UserId\n        }) // userId'yi body'ye ekle\n      });\n      if (response.ok) {\n        const savedFeature = await response.json();\n        newFeature.set('id', savedFeature.value.id);\n        vectorSource.current.addFeature(newFeature);\n        dispatch(setSelectActive(true));\n        alert('Feature saved successfully!');\n        dispatch(addFeature(savedFeature.value));\n      } else {\n        alert('Failed to save feature.');\n      }\n    } catch (error) {\n      console.error('Error saving feature:', error);\n    }\n  };\n  const removeFeature = feature => {\n    vectorSource.current.removeFeature(selectedFeature);\n    setSelectedFeature(null);\n  };\n  const onSave = () => {\n    handleSaveFeature(selectedFeature);\n    removeFeature(selectedFeature);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"map\",\n      className: \"w-full h-screen\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 7\n    }, this), selectedFeature && /*#__PURE__*/_jsxDEV(AddFeature, {\n      feature: selectedFeature,\n      onClose: () => removeFeature(selectedFeature),\n      onSave: onSave\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 9\n    }, this), showClickedFeature && clickedFeature && /*#__PURE__*/_jsxDEV(FeaturePopup, {\n      feature: clickedFeature,\n      onClose: () => setShowClickedFeature(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 9\n    }, this), showUpdateModal && /*#__PURE__*/_jsxDEV(StopEditingButton, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 9\n    }, this), showUpdateFeature && /*#__PURE__*/_jsxDEV(FeatureModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 366,\n    columnNumber: 5\n  }, this);\n};\n_s(MapComponent, \"r8fmi88yHlHoc+5OTOmskgnC1WQ=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useSelector","useDispatch","fetchWktData","addFeature","Map","getCenter","View","Tile","TileLayer","Vector","VectorLayer","VectorSource","OSM","WKT","fromLonLat","Draw","setDrawActive","AddFeature","setZoom","setDeletedFeatureId","Select","click","defaults","defaultControls","FeaturePopup","setSelectActive","Modify","Translate","Collection","StopEditingButton","FeatureModal","setShowUpdateFeature","setUpdateCanceled","setIsEditingDone","setNewFeature","fetchUsers","setUsers","toLonLat","getWeatherByCoordinates","jsxDEV","_jsxDEV","MapComponent","_s","dispatch","wktData","state","wkt","userData","user","users","status","drawType","draw","drawActive","zoomMap","feature","zoom","featureId","id","featureLog","log","featureName","name","deletedFeatureId","selectAvailable","select","selectActive","featureToModify","update","showUpdateModal","showUpdateFeature","isEditingDone","newFeature","newFeatureId","updateCanceled","weather","setWeather","mapRef","selectInteraction","vectorSource","modifyInteraction","translateInteraction","drawInteraction","selectedFeature","setSelectedFeature","clickedFeature","setClickedFeature","showClickedFeature","setShowClickedFeature","error","setError","token","localStorage","getItem","response","fetch","method","headers","Authorization","ok","Error","data","json","result","message","value","err","current","target","layers","source","controls","view","center","condition","addInteraction","on","event","selected","featureCenter","getGeometry","getExtent","lon","lat","weatherData","console","format","forEach","readFeature","dataProjection","featureProjection","setProperties","featureToChange","getFeatures","find","get","removeFeature","targetFeatureData","removeInteraction","type","setActive","features","wktFormat","getView","setCenter","targetZoom","featureToRemove","handleSaveFeature","writeFeature","UserId","alert","body","JSON","stringify","savedFeature","set","onSave","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClose","_c","$RefreshReg$"],"sources":["C:/Users/hasan/webproj/openlayers-project/src/components/Map.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { fetchWktData, addFeature } from '../store/wktSlice';\r\nimport { Map } from 'ol'; \r\nimport { getCenter } from 'ol/extent'; \r\nimport View from 'ol/View'; \r\nimport { Tile as TileLayer } from 'ol/layer';\r\nimport { Vector as VectorLayer } from 'ol/layer';\r\nimport { Vector as VectorSource } from 'ol/source';\r\nimport OSM from 'ol/source/OSM';\r\nimport { WKT } from 'ol/format';\r\nimport { fromLonLat } from 'ol/proj';\r\nimport { Draw } from 'ol/interaction';\r\nimport { setDrawActive } from '../store/drawSlice';\r\nimport AddFeature from './AddFeature';\r\nimport { setZoom, setDeletedFeatureId} from '../store/featureSlice';\r\nimport { Select } from \"ol/interaction\";\r\nimport { click } from \"ol/events/condition\";\r\nimport { defaults as defaultControls } from 'ol/control';\r\nimport FeaturePopup from './ShowFeature';\r\nimport { setSelectActive } from '../store/selectSlice';\r\nimport Modify from \"ol/interaction/Modify\";\r\nimport Translate from \"ol/interaction/Translate\";\r\nimport Collection from \"ol/Collection\";\r\nimport StopEditingButton from './StopEditingButton';\r\nimport FeatureModal from './UpdateFeature';\r\nimport { setShowUpdateFeature, setUpdateCanceled } from '../store/updateSlice';\r\nimport { setIsEditingDone, setNewFeature } from '../store/newFeatureSlice';\r\nimport { fetchUsers, setUsers } from '../store/userSlice';\r\nimport { toLonLat } from \"ol/proj\";\r\nimport { getWeatherByCoordinates } from \"../services/weatherService\";\r\n\r\n\r\nconst MapComponent = () => {\r\n  const dispatch = useDispatch();\r\n  const wktData = useSelector((state) => state.wkt.wktData);\r\n  const userData = useSelector((state) => state.user.users);\r\n  const status = useSelector((state) => state.wkt.status);\r\n  const drawType = useSelector((state) => state.draw.drawType);\r\n  const drawActive = useSelector((state) => state.draw.drawActive);\r\n  const zoomMap = useSelector((state) => state.feature.zoom);\r\n  const featureId = useSelector((state) => state.feature.id);\r\n  const featureLog = useSelector((state) => state.feature.log);\r\n  const featureName = useSelector((state) => state.feature.name);\r\n  const deletedFeatureId = useSelector((state) => state.feature.deletedFeatureId);\r\n  const selectAvailable = useSelector((state) => state.select.selectActive);\r\n  const featureToModify = useSelector((state) => state.update.featureToModify);\r\n  const showUpdateModal = useSelector((state) => state.update.showUpdateModal);\r\n  const showUpdateFeature = useSelector((state) =>state.update.showUpdateFeature);\r\n  const isEditingDone = useSelector((state) => state.newFeature.isEditingDone);\r\n  const newFeatureId = useSelector((state) => state.newFeature.newFeatureId);\r\n  const updateCanceled = useSelector((state) => state.update.updateCanceled);\r\n  const [weather, setWeather] = useState(null);\r\n\r\n\r\n  const mapRef = useRef();\r\n  const selectInteraction = useRef(null);\r\n  const vectorSource = useRef(new VectorSource());\r\n  const modifyInteraction = useRef(null);\r\n  const translateInteraction = useRef(null);\r\n  const drawInteraction = useRef(null);\r\n  const [selectedFeature, setSelectedFeature] = useState(null);\r\n  const [clickedFeature, setClickedFeature] = useState(null);\r\n  const [showClickedFeature, setShowClickedFeature] = useState(false);\r\n\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchWktData());\r\n    dispatch(fetchUsers());\r\n  }, [dispatch]);\r\n\r\n  const [users, setUsers] = useState([]);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchUsers = async () => {\r\n      try {\r\n        const token = localStorage.getItem(\"token\"); \r\n        if (!token) {\r\n          setError(\"Token bulunamadı. Lütfen giriş yapın.\");\r\n          return;\r\n        }\r\n  \r\n        const response = await fetch(\"https://localhost:7014/api/Users\", {\r\n          method: \"GET\",\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        });\r\n  \r\n        if (!response.ok) {\r\n          throw new Error(\"Kullanıcılar yüklenirken hata oluştu.\");\r\n        }\r\n  \r\n        const data = await response.json();\r\n  \r\n        if (!data.result) {\r\n          throw new Error(data.message || \"Kullanıcılar yüklenirken hata oluştu.\");\r\n        }\r\n  \r\n        setUsers(data.value); // Kullanıcı listesini `setUsers` ile güncelle\r\n      } catch (err) {\r\n        setError(err.message);\r\n      }\r\n    };\r\n  \r\n    fetchUsers();\r\n  }, []);\r\n  \r\n  useEffect(() => {\r\n    if (!mapRef.current) {\r\n      mapRef.current = new Map({\r\n        target: 'map',\r\n        layers: [\r\n          new TileLayer({ source: new OSM() }),\r\n          new VectorLayer({ source: vectorSource.current }),\r\n        ],\r\n        controls: [],\r\n        view: new View({ center: fromLonLat([29.035767, 41.065685]), zoom: 6 }),\r\n      });\r\n\r\n      selectInteraction.current = new Select({\r\n        condition: click,\r\n      });\r\n\r\n      mapRef.current.addInteraction(selectInteraction.current);\r\n      selectInteraction.current.on('select', (event) => {\r\n        const selected = event.selected[0];\r\n        setClickedFeature(selected || null);\r\n        if (clickedFeature) {\r\n          const featureCenter = getCenter(selected.getGeometry().getExtent());\r\n          const [lon, lat] = toLonLat(featureCenter); // EPSG:4326 dönüşümü\r\n\r\n          // Hava durumu verisini çek\r\n          const weatherData = getWeatherByCoordinates(lat, lon);\r\n          setWeather(weatherData);\r\n          console.log(weather);\r\n        }\r\n        const featureCenter = getCenter(selected.getGeometry().getExtent());\r\n        setShowClickedFeature(true);\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (status === 'succeeded') {\r\n      const format = new WKT();\r\n      wktData.forEach(({ log, id, name }) => {\r\n        const feature = format.readFeature(log, {\r\n          dataProjection: 'EPSG:3857',\r\n          featureProjection: 'EPSG:3857',\r\n        });\r\n\r\n        feature.setProperties({ id, name });\r\n        vectorSource.current.addFeature(feature);\r\n      });\r\n    }\r\n  }, [status]);\r\n\r\n  useEffect(() => {\r\n    if(isEditingDone) {\r\n      const featureToChange = vectorSource.current.getFeatures().find(\r\n        (feature) => feature.get('id') === newFeatureId\r\n      );\r\n      if(featureToChange) {\r\n        dispatch(setNewFeature(featureToChange));\r\n      }\r\n      dispatch(setShowUpdateFeature(true));\r\n      dispatch(setIsEditingDone(false));\r\n    }\r\n  }, [isEditingDone]);\r\n\r\n  useEffect(() => {\r\n    if(updateCanceled) {\r\n      vectorSource.current.removeFeature(clickedFeature);\r\n      const format = new WKT();\r\n      const targetFeatureData = wktData.find(feature => feature.id === newFeatureId);\r\n      const feature = format.readFeature(targetFeatureData.log, {\r\n        dataProjection: 'EPSG:3857',\r\n        featureProjection: 'EPSG:3857'\r\n      });\r\n      feature.setProperties({\r\n        id: targetFeatureData.id,\r\n        name: targetFeatureData.name\r\n      });\r\n      vectorSource.current.addFeature(feature);\r\n      dispatch(setUpdateCanceled(false));\r\n    }\r\n  }, [updateCanceled]);\r\n\r\n  useEffect(() => {\r\n    if (drawInteraction.current) {\r\n      mapRef.current.removeInteraction(drawInteraction.current);\r\n    }\r\n\r\n    if (drawActive && drawType) {\r\n\r\n      drawInteraction.current = new Draw({\r\n        source: vectorSource.current,\r\n        type: drawType,\r\n      });\r\n\r\n      drawInteraction.current.on('drawend', (event) => {\r\n        const feature = event.feature;\r\n        setSelectedFeature(feature);\r\n        mapRef.current.removeInteraction(drawInteraction.current);\r\n        dispatch(setDrawActive(false));\r\n      });\r\n\r\n      mapRef.current.addInteraction(drawInteraction.current);\r\n    }\r\n  }, [drawType, drawActive, dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (selectInteraction.current) {\r\n      selectInteraction.current.setActive(selectAvailable);\r\n    }\r\n  }, [selectAvailable]);\r\n\r\n  useEffect(() => {\r\n    if (modifyInteraction.current) {\r\n      mapRef.current.removeInteraction(modifyInteraction.current);\r\n      modifyInteraction.current = null;\r\n    }\r\n  \r\n    if (translateInteraction.current) {\r\n      mapRef.current.removeInteraction(translateInteraction.current);\r\n      translateInteraction.current = null;\r\n    }\r\n  \r\n    if (featureToModify) {\r\n      modifyInteraction.current = new Modify({\r\n        features: new Collection([featureToModify]),\r\n      });\r\n      mapRef.current.addInteraction(modifyInteraction.current);\r\n  \r\n      modifyInteraction.current.on(\"modifyend\", () => {\r\n        vectorSource.current.removeFeature(featureToModify);\r\n        vectorSource.current.addFeature(featureToModify);\r\n      });\r\n  \r\n      translateInteraction.current = new Translate({\r\n        features: new Collection([featureToModify]),\r\n      });\r\n      mapRef.current.addInteraction(translateInteraction.current);\r\n  \r\n      translateInteraction.current.on(\"translateend\", () => {\r\n        vectorSource.current.removeFeature(featureToModify);\r\n        vectorSource.current.addFeature(featureToModify);\r\n      });\r\n    }\r\n  }, [featureToModify]);\r\n  \r\n\r\n\r\n  useEffect(() => {\r\n    if(zoomMap !== \"\") {\r\n      const wktFormat = new WKT();\r\n      const feature = wktFormat.readFeature(zoomMap, {\r\n      dataProjection: 'EPSG:3857',\r\n      featureProjection: 'EPSG:3857',\r\n    });\r\n    const featureCenter = getCenter(feature.getGeometry().getExtent());\r\n\r\n    const view = mapRef.current.getView();\r\n    view.setCenter(featureCenter);\r\n\r\n    const targetZoom = 9;\r\n    view.setZoom(targetZoom);\r\n    dispatch(setZoom(\"\"));\r\n    }\r\n  }, [zoomMap ,dispatch, featureLog]);\r\n\r\n  useEffect(() => {\r\n    if (deletedFeatureId) {\r\n      const features =vectorSource.current.getFeatures();\r\n      console.log(features);\r\n      const featureToRemove = vectorSource.current.getFeatures().find(\r\n        (feature) => feature.get('id') === deletedFeatureId\r\n      );\r\n\r\n      if (featureToRemove) {\r\n        vectorSource.current.removeFeature(featureToRemove);\r\n        dispatch(setDeletedFeatureId(null));\r\n      }\r\n    }\r\n  }, [deletedFeatureId]);\r\n  \r\n  /*const handleSaveFeature = async (feature) => {\r\n    const wkt = new WKT().writeFeature(feature);\r\n    const name = feature.get('name');\r\n    const newFeature = feature;\r\n\r\n    try {\r\n      const response = await fetch('https://localhost:7014/api/Logs', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ name, log: wkt }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const savedFeature = await response.json();\r\n        newFeature.set('id', savedFeature.value.id);\r\n        vectorSource.current.addFeature(newFeature);\r\n        dispatch(setSelectActive(true));\r\n        alert('Feature saved successfully!');\r\n        dispatch(addFeature(savedFeature.value));\r\n      } else {\r\n        alert('Failed to save feature.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving feature:', error);\r\n    }\r\n  }; */\r\n\r\n  const handleSaveFeature = async (feature) => {\r\n    const wkt = new WKT().writeFeature(feature);\r\n    const name = feature.get('name');\r\n    const newFeature = feature;\r\n\r\n    try {\r\n        \r\n        const token = localStorage.getItem('token');\r\n        const UserId = localStorage.getItem('userId');\r\n        if (!token) {\r\n            alert('Authentication token not found!');\r\n            return;\r\n        }\r\n        const response = await fetch('https://localhost:7014/api/Logs', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`, // Token'ı Authorization başlığına ekle\r\n            },\r\n            body: JSON.stringify({ name, log: wkt, UserId }), // userId'yi body'ye ekle\r\n        });\r\n\r\n        if (response.ok) {\r\n            const savedFeature = await response.json();\r\n            newFeature.set('id', savedFeature.value.id);\r\n            vectorSource.current.addFeature(newFeature);\r\n            dispatch(setSelectActive(true));\r\n            alert('Feature saved successfully!');\r\n            dispatch(addFeature(savedFeature.value));\r\n        } else {\r\n            alert('Failed to save feature.');\r\n        }\r\n    } catch (error) {\r\n        console.error('Error saving feature:', error);\r\n    }\r\n};\r\n\r\n\r\n  const removeFeature = (feature) => {\r\n    vectorSource.current.removeFeature(selectedFeature);\r\n    setSelectedFeature(null);\r\n  }\r\n\r\n  const onSave = () => {\r\n    handleSaveFeature(selectedFeature);\r\n    removeFeature(selectedFeature);\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <div id=\"map\" className=\"w-full h-screen\" ></div>\r\n      {selectedFeature && (\r\n        <AddFeature\r\n          feature={selectedFeature}\r\n          onClose={() => removeFeature(selectedFeature)}\r\n          onSave={onSave}\r\n        />\r\n      )}\r\n      {showClickedFeature && clickedFeature &&(\r\n        <FeaturePopup\r\n          feature={clickedFeature}\r\n          onClose={() => setShowClickedFeature(false)}\r\n        />\r\n      )}\r\n      {showUpdateModal && (\r\n        <StopEditingButton\r\n        />\r\n      )}\r\n      {showUpdateFeature && (\r\n        <FeatureModal\r\n        />\r\n      )}\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MapComponent;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}